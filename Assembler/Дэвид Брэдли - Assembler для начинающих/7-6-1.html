<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body background="../bgrwhite.gif">
<p><div align="center"><b><font size="+1"><i>	
<a name="7-6">Модель программирования 8087</a></i></font></b></div></p>

<p><span
style='mso-tab-count:1'>      </span>Хотя физически микросхема 8087
представляет собой отдельный

<p><span
style="mso-spacerun: yes">    </span>процессор, его нужно рассматривать, как
расширитель микропроцессора

<p><span
style="mso-spacerun: yes">    </span>8088, добавляющий к нему новые
возможности.<span style="mso-spacerun: yes">  </span>Эти возможности

<p><span
style="mso-spacerun: yes">    </span>включают в сеьы дополнительные типы
данных, дополнительные командв

<p><span
style="mso-spacerun: yes">    </span>и регистры.<span style="mso-spacerun:
yes">  </span>Рисунок 7.6 иллюстрирует программную модель

<p><span
style="mso-spacerun: yes">    </span>сопроцессора 8087.<span style='mso-tab-count:
1'>  </span>Его регистры показаны вместе с регистрами всей

<p><span
style="mso-spacerun: yes">    </span>системы программирования.
<p><div align="center"><b><a name="7-6-1">Регистровый стек
</a></b></div></p>

<p><span
style='mso-tab-count:1'>      </span>Сопроцессор 8087 имеет четыре регистра
специального назначенмя

<p><span
style="mso-spacerun: yes">    </span>и восьмирегистровый стек для
арифметических операндов.<span style="mso-spacerun: yes">  </span>Этот

<p><span
style="mso-spacerun: yes">    </span>регистровый стек лежит в основе работы
сопроцессора 8087, и поэтому

<p><span
style="mso-spacerun: yes">    </span>мы прежде всего рассмотрим именно его.

<p><span
style='mso-tab-count:1'>      </span>Регистровый стек процессора числовой
обработки состоит из

<p><span
style="mso-spacerun: yes">    </span>восьми позиций, каждая из которых имеет
ширину 80 бит.<span style="mso-spacerun: yes">  </span>Сороцессор

<p><span
style="mso-spacerun: yes">    </span>8087 запоминает все объекты во временном
действительном формате,

<p><span
style="mso-spacerun: yes">    </span>независимо от того, как они представлены в
памяти системы;

<p><span
style="mso-spacerun: yes">    
</span>ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:2'>            </span><span
style="mso-spacerun: yes">     </span>ПОЛЕ ДАННЫХ<span style='mso-tab-count:
3'>              </span><span style="mso-spacerun: yes">    </span>ПОЛЕ<span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:1'>      </span>79<span
style="mso-spacerun: yes">   </span>78 <span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">   </span>64 63<span style='mso-tab-count:3'>                </span>
0<span style="mso-spacerun: yes">  </span>1<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">  </span>0 і

<p><span
style="mso-spacerun: yes">    
</span>іЪДДДДДДВДДДДДДДДДДДДДДДВДДДДДДДДДДДДДДДДДДДДДДДДДДДї<span
style="mso-spacerun: yes">  </span>ЪДДДДДДїі

<p><span
style="mso-spacerun: yes">     </span>ііЗНАК<span style="mso-spacerun: yes"> 
</span>і ПОРЯДОК<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">   </span>МАНТИССА<span style='mso-tab-count:2'>       </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">     </span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">     
</span>і<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:4'>                        </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">     
</span>і<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:4'>                        </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">     
</span>і<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:4'>                        </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">     
</span>і<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:4'>                        </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">   
</span><span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:
2'>          </span><span style="mso-spacerun: yes">     </span>і<span
style='mso-tab-count:4'>                        </span> і<span
style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">     
</span>і<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:4'>                        </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іГДДДДДДЕДДДДДДДДДДДДДДДЕДДДДДДДДДДДДДДДДДДДДДДДДДДДґ<span
style="mso-spacerun: yes">  </span>ГДДДДДДґі

<p><span
style="mso-spacerun: yes">     </span>іі<span style="mso-spacerun: yes">     
</span>і<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:4'>                        </span>
і<span style="mso-spacerun: yes">  </span>і<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>іі

<p><span
style="mso-spacerun: yes">    
</span>іАДДДДДДБДДДДДДДДДДДДДДДБДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ<span
style="mso-spacerun: yes">  </span>АДДДДДДЩі

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>15<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">   </span>0<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>ЪДДДДДДДДДДДДДДДДДДДДДДї<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">   
</span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>іУПРАВЛЯЮЩИЙ РЕГИСТР<span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>ГДДДДДДДДДДДДДДДДДДДДДДґ<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">   
</span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>іРЕГИСТР СОСТОЯНИЯ<span style='mso-tab-count:
1'>  </span><span style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:
2'>        </span><span style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>ГДДДДДДДДДДДДДДДДДДДДДДґ<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">   
</span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>і<span style='mso-tab-count:3'>             </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>ГД УКАЗАТЕЛЬ<span style="mso-spacerun:
yes">  </span>КОМАНД<span style="mso-spacerun: yes">  </span>Дґ<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">   
</span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>і<span style='mso-tab-count:3'>             </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>ГДДДДДДДДДДДДДДДДДДДДДДґ<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">   
</span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>і<span style='mso-tab-count:3'>             </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>ГД УКАЗАТЕЛЬ<span style="mso-spacerun:
yes">  </span>ДАННЫХ ДДґ<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>і<span style='mso-tab-count:3'>             </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">    </span>і

<p><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">    </span>АДДДДДДДДДДДДДДДДДДДДДДЩ<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">   
</span>і

<p><span
style="mso-spacerun: yes">    
</span>АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes"> 
</span>Фиг. 7.6 Регистровая труктура микросхемы INTEL 8087

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style="mso-spacerun: yes">    </span>сопроцессор 8087 преобразует целые и
действительные числа во

<p><span
style="mso-spacerun: yes">    </span>внутренний формат.<span style='mso-tab-count:
1'>  </span>Как мы уже видели, такое представление

<p><span
style="mso-spacerun: yes">    </span>допускает очень высокую точность и большой
диапазон.<span style="mso-spacerun: yes">  </span>В случае

<p><span
style="mso-spacerun: yes">    </span>целых чисел сопроцессор 8087 получает
точные результаты вплоть до

<p><span
style="mso-spacerun: yes">    </span>значения 2**64.<span style="mso-spacerun:
yes">  </span>Внутренний формат с плавающей точкой малоинтересен

<p><span
style="mso-spacerun: yes">    </span>для тех программистов, которые
обрабатывают целые числа с помощью

<p><span
style="mso-spacerun: yes">    </span>микросхемы 8087.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Регистры сопроцессора 8087 функционируют
как обычный стек,

<p><span
style="mso-spacerun: yes">    </span>такой же, как и стек микропроцессора 8088.<span
style='mso-tab-count:1'>  </span>Но у этого стека

<p><span
style="mso-spacerun: yes">    </span>имеется ограниченное число позиций -
только вомесь.<span style="mso-spacerun: yes">  </span>Процессор 8087

<p><span
style="mso-spacerun: yes">    </span>имеет еще один регистр, труднодоступный
для программиста.<span style="mso-spacerun: yes">  </span>Этот

<p><span
style="mso-spacerun: yes">    </span>регистр представляет собой слово,
содержащее &quot;этикетки&quot; каждой

<p><span
style="mso-spacerun: yes">    </span>позиции стека.<span style="mso-spacerun:
yes">  </span>Такой регистр позволяет сопроцессору 8087

<p><span
style="mso-spacerun: yes">    </span>отслеживать, какие из позиций стека
используются, а какие свободны.

<p><span
style="mso-spacerun: yes">    </span>Любая попытка помещения объекта в стек на
уже занятую позицию

<p><span
style="mso-spacerun: yes">    </span>приводит к врзникновению особой ситуации -
недействительной

<p><span
style="mso-spacerun: yes">    </span>операции.<span style="mso-spacerun: yes"> 
</span>Ниже будут обсуждены особые ситуации, и то, как

<p><span
style="mso-spacerun: yes">    </span>программа может бороться с проблемой
переполнения стека.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Программа может заносить данные в стек
сопроцессора 8087 с

<p><span
style="mso-spacerun: yes">    </span>помощью команды загрузки, и все команды
загрузки помешают данные в

<p><span
style="mso-spacerun: yes">    </span>вершину стека.<span style="mso-spacerun:
yes">  </span>Если число в главной памяти записано не во

<p><span
style="mso-spacerun: yes">    </span>временном действительном формате,
микросхема 8087 преобразует его в

<p><span
style="mso-spacerun: yes">    </span>80-битовое представление во время
выполнения команды загрузки.

<p><span
style="mso-spacerun: yes">    </span>Аналогично команды записи извлекают
значение из стека микросхемы

<p><span
style="mso-spacerun: yes">    </span>8087 и помещают их в главную память, а
если необходимо

<p><span
style="mso-spacerun: yes">    </span>преобразование формата данных, сопроцессор
8087 выполняет его как

<p><span
style="mso-spacerun: yes">    </span>часть операции записи.<span
style="mso-spacerun: yes">  </span>Некоторые формы операции записи оставляют

<p><span
style="mso-spacerun: yes">    </span>вершину стека нетронутой для дальнейших
действий.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>После того, как программа поместила данные
в стек сопроцессора

<p><span
style="mso-spacerun: yes">    </span>8087, они могут быть использованы в любой
вычислительной команде.

<p><span
style="mso-spacerun: yes">    </span>Вычислительные команды процессора 8087
допускают как действия между

<p><span
style="mso-spacerun: yes">    </span>регистрами, так и действия между памятью и
регистрами.<span style="mso-spacerun: yes">  </span>Точно так

<p><span
style="mso-spacerun: yes">    </span>же, как и в случае микропроцессора 8088,
из любых двух операндов

<p><span
style="mso-spacerun: yes">    </span>арифметической операции один должен
находиться в регистре.<span style='mso-tab-count:1'>    </span>У

<p><span
style="mso-spacerun: yes">    </span>сопроцессора 8087 один из операндов должен
быть всегда верхним

<p><span
style="mso-spacerun: yes">    </span>элементом стека, а другой операнд может
быть взят их памяти, либо

<p><span
style="mso-spacerun: yes">    </span>из стека регистров.<span
style="mso-spacerun: yes">  </span>Стек регистров сопроцессора 8087 всегда
должен

<p><span
style="mso-spacerun: yes">    </span>быть приемником результата любой
арифметической операции.

<p><span
style="mso-spacerun: yes">    </span>Непосредственно записать результат в
память той же командой,

<p><span
style="mso-spacerun: yes">    </span>которая выполнила вычисления, процессор
числовой обработки не

<p><span
style="mso-spacerun: yes">    </span>может.<span style="mso-spacerun: yes"> 
</span>Чтобы переслать операнд обратно в память, необходима

<p><span
style="mso-spacerun: yes">    </span>отдельная команда записи (или команда
извлечения из стека с записью

<p><span
style="mso-spacerun: yes">    </span>в память).<span style='mso-tab-count:1'>    </span>Некоторые
арифметические команды извлекают верхний

<p><span
style="mso-spacerun: yes">    </span>элемент стека и сбрасывают его, не
записывая в память.

<p><div align="center"><a href="index.html"><img src="../soder.gif" width=120 height=31 border=0 alt=""></a></div></p>

</body>
</html>
