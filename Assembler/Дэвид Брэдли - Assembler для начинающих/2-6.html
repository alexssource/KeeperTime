<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body background="../bgrwhite.gif">
<p><div align="center"><b><font size="+1"><i>	
<a name="2-6">Принципы работы Ассемблера</a></i></font></b></div></p>

<p><span
style="mso-spacerun: yes">    </span>Рассмотрим теперь работу ассемблера в
целом.<span style="mso-spacerun: yes">  </span>Детали будут

<p><span
style="mso-spacerun: yes"> </span><span style="mso-spacerun: yes">  
</span>обсуждены позднее, но сейчас нам нужно ввести новые термины и

<p><span
style="mso-spacerun: yes">    </span>ознакомиться с реальным результатом работы
ассемблера.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Ассемблер берет программу, написанную на
языке ассемблера, и

<p><span
style="mso-spacerun: yes">    </span>превращает ее в машинный язык.<span
style="mso-spacerun: yes">  </span>Файл, который содержит программу на

<p><span
style="mso-spacerun: yes">    </span>языке ассемблера, называют исходным
файлом.<span style="mso-spacerun: yes">  </span>Выход и ассемблера в

<p><span
style="mso-spacerun: yes">    </span>действительности является не собственно
машинным языком, а

<p><span
style="mso-spacerun: yes">    </span>некоторым промежуточным представлением
программы.<span style="mso-spacerun: yes">  </span>Этот выходной

<p><span
style="mso-spacerun: yes">    </span>файл называют объектным файлом.<span
style="mso-spacerun: yes">  </span>Данные в нем называются объектным

<p><span
style="mso-spacerun: yes">    </span>кодом.<span style="mso-spacerun: yes"> 
</span>Для получения из него настоящего машинного кода объектный

<p><span
style="mso-spacerun: yes">    </span>код должен быть несколько изменен.<span
style='mso-tab-count:1'>    </span>Для IBM PC это делает программа

<p><span
style="mso-spacerun: yes">    </span>редактор связей LINK.<span
style="mso-spacerun: yes">  </span>Шаг преобразования объектных кодов в

<p><span
style="mso-spacerun: yes">    </span>машинные принято называть построением
связей или редактированием

<p><span
style="mso-spacerun: yes">    </span>связей.<span style="mso-spacerun: yes"> 
</span>Как пользоваться редактором связей мы увидим в одной из

<p><span
style="mso-spacerun: yes">    </span>следующих глав.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Помимо преобразования исходного кода в
объектный ассемблер

<p><span
style="mso-spacerun: yes">    </span>создает несколько других выходных
файлов.<span style="mso-spacerun: yes">  </span>Один из них -

<p><span
style="mso-spacerun: yes">    </span>ассемблерный листинг.<span
style="mso-spacerun: yes">  </span>Он содержит сообщение о действиях

<p><span
style="mso-spacerun: yes">    </span>ассемблера.<span style="mso-spacerun:
yes">  </span>Зтот файл содержит исходный код вместе с

<p><span
style="mso-spacerun: yes">    </span>комментариями, а также объектный код,
сформированный ассемблером.

<p><span
style="mso-spacerun: yes">    </span>Фиг.<span style="mso-spacerun: yes"> 
</span>2.9 дает пример листинга ассемблера, иногда называемого

<p><span
style="mso-spacerun: yes">    </span>распечаткой.


<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>Microsoft (R) Macro Assembler Version 5.00 <span style='mso-tab-count:
2'>            </span><span style="mso-spacerun: yes"> </span>10/28/88

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun:
yes"> </span>16:35:34

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>Фиг. 2.9 Пример ассемблирования<span style='mso-tab-count:4'>                        </span>
Page<span style='mso-tab-count:1'> </span><span style="mso-spacerun: yes"> 
</span>1-1

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>1<span style='mso-tab-count:5'>                         </span><span
style="mso-spacerun: yes">     </span>PAGE<span style="mso-spacerun: yes">   
</span>,132

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes"> 
</span><span style="mso-spacerun: yes">  </span>2<span style='mso-tab-count:
5'>                         </span><span style="mso-spacerun: yes">    
</span>TITLE<span style="mso-spacerun: yes">   </span>Фиг. 2.9 Пример
ассемблирования

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>3 0000<span style='mso-tab-count:3'>              </span><span
style="mso-spacerun: yes">     </span>CODE<span style="mso-spacerun: yes">   
</span>SEGMENT

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>4<span style='mso-tab-count:5'>                         </span><span
style="mso-spacerun: yes">     </span>ASSUME<span style="mso-spacerun: yes"> 
</span>CS:CODE

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>5

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>6 0000<span style="mso-spacerun: yes">  </span>03 C3<span
style='mso-tab-count:2'>       </span><span style="mso-spacerun: yes">    
</span>PART1:<span style="mso-spacerun: yes">  </span>ADD<span
style="mso-spacerun: yes">     </span>AX,BX<span style="mso-spacerun: yes">   
</span>; Сложить с длиной буфера

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>7

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>8 0002<span style='mso-tab-count:3'>              </span><span
style="mso-spacerun: yes">     </span>CODE<span style="mso-spacerun: yes">   
</span>ENDS

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">   
</span>9<span style='mso-tab-count:5'>                         </span><span
style="mso-spacerun: yes">     </span>END

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">   </span>Фиг. 2.9 Пример ассемблирования&#18;

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Взяв пример команды ассемблера, рассмотрим
результаты работы

<p><span
style="mso-spacerun: yes">    </span>ассемблера.<span style="mso-spacerun:
yes">  </span>В правой части распечатки находятся исходные команды.

<p><span
style="mso-spacerun: yes">    </span>В левой части - информация,
сгенерированная ассемблером.<span style="mso-spacerun: yes">  </span>Первая

<p><span
style="mso-spacerun: yes">    </span>колонка содержит номер каждой строки
распечатки.<span style="mso-spacerun: yes">  </span>Ассемблер

<p><span
style="mso-spacerun: yes">    </span>устанавливает эти номера для исходного
файла.<span style="mso-spacerun: yes">  </span>Они строк не

<p><span
style="mso-spacerun: yes">    </span>обязательно соотносятся с номерами строк в
исходном файле

<p><span
style="mso-spacerun: yes">    </span>сформированном текстовым редактором.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Во второй колонке содержатся адреса
инструкций.<span style="mso-spacerun: yes">  </span>Программа LINK

<p><span
style="mso-spacerun: yes">    </span>может их изменить, но они являются лучшим
предположением, которое

<p><span
style="mso-spacerun: yes">    </span>может сделать ассемблер на шаге
ассемблирования.<span style="mso-spacerun: yes">  </span>Следующая колонка

<p><span
style="mso-spacerun: yes">    </span>- код команды на машинном языке.<span
style="mso-spacerun: yes">  </span>Поскольу команды 8088 имеют длину

<p><span
style="mso-spacerun: yes">    </span>от 8 до 56 бит, это поле будет изменяться
в размере.<span style="mso-spacerun: yes">  </span>Кроме того,

<p><span
style="mso-spacerun: yes">    </span>программа LINK может изменить некоторую
информацию в поле объектных

<p><span
style="mso-spacerun: yes">    </span>кодов.<span style="mso-spacerun: yes"> 
</span>Редактор связей может изменить любую группу команд,

<p><span
style="mso-spacerun: yes">    </span>оперирующих с адресами.<span
style="mso-spacerun: yes">  </span>Однако, за исключением адресов, листинг

<p><span
style="mso-spacerun: yes">    </span>ассемблера дает верные машинные коды,
которые и будут в дальнейшем

<p><span
style="mso-spacerun: yes">    </span>исполняться.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>В большинстве примеров программ мы будем
использовать листинг

<p><span
style="mso-spacerun: yes">    </span>ассемблера.<span style="mso-spacerun:
yes">  </span>Это позволит нам сразу видеть вырабатываемый ассембле-

<p><span
style="mso-spacerun: yes">    </span>ром код.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Другой создаваемый ассемблером файл - файл
перекрестных сыылок.

<p><span
style="mso-spacerun: yes">    </span>Этот файл описывает все связи между
метками и командами, которые их

<p><span
style="mso-spacerun: yes">    </span>используют.<span style="mso-spacerun:
yes">  </span>Такая информация незаменима, когда вы пытаетесь

<p><span
style="mso-spacerun: yes">    </span>изменить программу.<span
style="mso-spacerun: yes">  </span>Вы можете воспользовваться перекрестными

<p><span
style="mso-spacerun: yes">    </span>ссылками для того, чтобы выявить все
команды, которые обращаются к

<p><span
style="mso-spacerun: yes">    </span>определенному участку памяти.<span
style="mso-spacerun: yes">  </span>Это позволяет программисту

<p><span
style="mso-spacerun: yes">    </span>определить все команды, на которые может
повлиять изменение в

<p><span
style="mso-spacerun: yes">  </span><span style="mso-spacerun:
yes">  </span>другой чассти программы.<span style="mso-spacerun: yes"> 
</span>Использование информации о перекрестных

<p><span
style="mso-spacerun: yes">    </span>ссылках будет обсуждаться в главе 5.


<p><div align="center"><a href="index.html"><img src="../soder.gif" width=120 height=31 border=0 alt=""></a></div></p>
</body>
</html>
