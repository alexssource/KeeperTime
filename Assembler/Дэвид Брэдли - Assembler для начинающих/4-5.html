<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body background="../bgrwhite.gif">
<p><div align="center"><b><font size="+1"><i>	
<a name="4-5">Арифметический пример</a></i></font></b></div></p>

<p><span
style="mso-spacerun: yes">    </span>Чтобы проиллюстрировать функции, которые
мы рассмотрели в

<p><span
style="mso-spacerun: yes">   </span><span style="mso-spacerun:
yes"> </span>предыдущих разделах, давайте решим арифиетическую задачу на языке

<p><span
style="mso-spacerun: yes">    </span>ассемблера.<span style="mso-spacerun:
yes">  </span>Пример прост, но использует многие команды.<span
style="mso-spacerun: yes">  </span>Задача

<p><span
style="mso-spacerun: yes">    </span>заключается в вычислении частного двух
арифметических выражений, в

<p><span
style="mso-spacerun: yes">    </span>которых некоторые числа постоянны, а
другие переменны.<span style="mso-spacerun: yes">  </span>Все числа

<p><span
style="mso-spacerun: yes">    </span>являются 16=битовыми целыми числами со
знаком.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Формула вычислений:

<p><span
style='mso-tab-count:3'>                  </span><span style="mso-spacerun:
yes">      </span>A * 2 + B * C

<p><span
style='mso-tab-count:3'>                  </span>X = ------------------

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes">  </span>D - 3

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Эта задача решается подпрограммой на языке
ассемблера,

<p><span
style="mso-spacerun: yes">    </span>изображенной на Фиг. 4.16. Подпрограмма
сначала выполняет два

<p><span
style="mso-spacerun: yes">    </span>умножения. Так как микропроцессор 8088
всегда помещает результат

<p><span
style="mso-spacerun: yes">    </span>16=битового умножения в пару регистров
DX:AX, в примере результат

<p><span
style="mso-spacerun: yes">    </span>первого умножения переносится в пару
регистров BX:CX перед

<p><span
style="mso-spacerun: yes">    </span>выполнением второго умножения. Когда оба
умножения завершены,

<p><span
style="mso-spacerun: yes">    </span>программа выполняет сложение числителя.
Поскольку умножение дает

<p><span
style="mso-spacerun: yes">    </span>32=битовые результаты, в программе
требуется сложение повышенной

<p><span
style="mso-spacerun: yes">    </span>точности. Это сложение оставляет результат
в DX:AX. В примере

<p><span
style="mso-spacerun: yes">    </span>знаменатель вычисляется в регистре CX, а
затем на него делится

<p><span
style="mso-spacerun: yes">    </span>числитель. Программа записывает частное из
регистра AX в переменную

<p><span
style="mso-spacerun: yes">    </span>результата X. Остаток в этой задаче
игнорируется.

<p>

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>Microsoft (R) Macro Assembler Version 5.00 <span style='mso-tab-count:
2'>            </span><span style="mso-spacerun: yes"> </span>1/1/80 04:01:10

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>Фиг. 4.16 Пример арифметических вычислений <span style='mso-tab-count:
2'>            </span><span style="mso-spacerun: yes"> </span>Page<span
style='mso-tab-count:1'> </span><span style="mso-spacerun: yes">  </span>1-1

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:6'>                                    </span><span
style="mso-spacerun: yes">     </span>PAGE<span style="mso-spacerun: yes">   
</span>,132

<p><span
style='mso-tab-count:6'>                                    </span><span
style="mso-spacerun: yes">     </span>TITLE<span style="mso-spacerun: yes">  
</span>Фиг. 4.16 Пример арифметических вычислений

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">    
</span>;-------------------------------------------------------------

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">     </span>; Производятся вычисления по формуле

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">     </span>;

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">     </span>;<span style='mso-tab-count:2'>            </span><span
style="mso-spacerun: yes">  </span>A * 2<span style="mso-spacerun: yes">  
</span>+<span style="mso-spacerun: yes">   </span>B * C

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">     </span>;<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">  </span>X<span style="mso-spacerun: yes">  </span>=<span
style='mso-tab-count:1'>      </span> -------------------

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">     </span>;<span style='mso-tab-count:2'>            </span><span
style="mso-spacerun: yes">       </span>D<span style="mso-spacerun: yes"> 
</span>-<span style="mso-spacerun: yes">  </span>3<br>
;

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">     </span>; Все переменные - 16-разрядные целые
числа со знаком

<p><span
style='mso-tab-count:5'>                              </span><span
style="mso-spacerun: yes">    
</span>;-------------------------------------------------------------

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:5'>                              </span>Фиг. 4.16
Арифметический пример (начало)

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0000<span style='mso-tab-count:3'>              </span><span
style="mso-spacerun: yes">     </span>CODE<span style="mso-spacerun: yes">   
</span>SEGMENT

<p><span
style='mso-tab-count:6'>                                    </span><span
style="mso-spacerun: yes">     </span>ASSUME<span style="mso-spacerun: yes"> 
</span>CS:CODE,DS:CODE

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0000<span style="mso-spacerun: yes">  </span>????<span style='mso-tab-count:
2'>        </span><span style="mso-spacerun: yes">     </span>X<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>DW<span style="mso-spacerun: yes">     </span><span style="mso-spacerun:
yes"> </span>?<span style='mso-tab-count:2'>          </span><span
style="mso-spacerun: yes">     </span>; Память для переменных

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0002<span style="mso-spacerun: yes">  </span>????<span style='mso-tab-count:
2'>        </span><span style="mso-spacerun: yes">     </span>A<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>DW<span style="mso-spacerun: yes">      </span>?

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0004<span style="mso-spacerun: yes">  </span>????<span style='mso-tab-count:
2'>        </span><span style="mso-spacerun: yes">     </span>B<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>DW<span style="mso-spacerun: yes">      </span>?

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0006<span style="mso-spacerun: yes">  </span>????<span style='mso-tab-count:
2'>        </span><span style="mso-spacerun: yes">     </span>C<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>DW<span style="mso-spacerun: yes">      </span>?

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0008<span style="mso-spacerun: yes">  </span>????<span style='mso-tab-count:
2'>        </span><span style="mso-spacerun: yes">     </span>D<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>DW<span style="mso-spacerun: yes">      </span>?

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>000A<span style='mso-tab-count:3'>              </span><span
style="mso-spacerun: yes">     </span>FIG4_16 PROC<span style="mso-spacerun:
yes">    </span>NEAR

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>000A<span style="mso-spacerun: yes">  </span>B8 0002<span
style='mso-tab-count:3'>                 </span><span style="mso-spacerun:
yes">     </span>MOV<span style="mso-spacerun: yes">     </span>AX, 2<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>; Загрузка константы

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>000D<span style="mso-spacerun: yes">  </span>F7 2E 0002 R<span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">    
</span>IMUL<span style="mso-spacerun: yes">    </span>A<span style='mso-tab-count:
2'>          </span><span style="mso-spacerun: yes">     </span>; DX:AX = A * 2

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0011<span style="mso-spacerun: yes">  </span>8B DA<span
style='mso-tab-count:3'>             </span><span style="mso-spacerun:
yes">     </span>MOV<span style="mso-spacerun: yes">     </span>BX, DX

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0013<span style="mso-spacerun: yes">  </span>8B C8<span
style='mso-tab-count:3'>             </span><span style="mso-spacerun:
yes">     </span>MOV<span style="mso-spacerun: yes">     </span>CX, AX<span
style='mso-tab-count:1'>     </span><span style="mso-spacerun: yes">    
</span>; BX:CX = A * 2

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0015<span style="mso-spacerun: yes">  </span>A1 0004 R<span
style='mso-tab-count:3'>               </span> <span style="mso-spacerun:
yes">    </span>MOV<span style="mso-spacerun: yes">     </span>AX, B

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0018<span style="mso-spacerun: yes">  </span>F7 2E 0006 R<span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">    
</span>IMUL<span style="mso-spacerun: yes">    </span>C<span style='mso-tab-count:
2'>          </span><span style="mso-spacerun: yes">     </span>; DX:AX = B * C

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>001C<span style="mso-spacerun: yes">  </span>03 C1<span
style='mso-tab-count:3'>             </span><span style="mso-spacerun:
yes">     </span>ADD<span style="mso-spacerun: yes">     </span>AX, CX

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>001E<span style="mso-spacerun: yes">  </span>13 D3<span
style='mso-tab-count:3'>             </span><span style="mso-spacerun:
yes">     </span>ADC<span style="mso-spacerun: yes">     </span>DX, BX<span
style='mso-tab-count:1'>     </span><span style="mso-spacerun: yes">    
</span>; DX:AX = A * 2<span style="mso-spacerun: yes">  </span>+<span
style="mso-spacerun: yes">  </span>B * C

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0020<span style="mso-spacerun: yes">  </span>8B 0E 0008 R<span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes">    
</span>MOV<span style="mso-spacerun: yes">     </span>CX, D

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0024<span style="mso-spacerun: yes">  </span>83 E9 03<span
style='mso-tab-count:3'>                </span><span style="mso-spacerun:
yes">     </span>SUB<span style="mso-spacerun: yes">     </span>CX, 3<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>; CX = D - 3

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0027<span style="mso-spacerun: yes">  </span>F7 F9<span
style='mso-tab-count:3'>             </span><span style="mso-spacerun:
yes">     </span>IDIV<span style="mso-spacerun: yes">    </span>CX <span
style='mso-tab-count:1'>  </span><span style="mso-spacerun: yes">     </span>;
AX = (A*2 + B*C) / (D-3)

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>0029<span style="mso-spacerun: yes">  </span>A3 0000 R<span
style='mso-tab-count:3'>               </span><span style="mso-spacerun:
yes">     </span>MOV<span style="mso-spacerun: yes">     </span>X, AX<span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">    
</span>; Сохранение результата

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>002C<span style="mso-spacerun: yes">  </span>C3<span style='mso-tab-count:
4'>                      </span><span style="mso-spacerun: yes">     </span>RET

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>002D<span style='mso-tab-count:3'>              </span><span
style="mso-spacerun: yes">     </span>FIG4_16 ENDP

<p><span
style='mso-tab-count:1'>      </span><span style="mso-spacerun: yes">     
</span>002D<span style='mso-tab-count:3'>              </span><span
style="mso-spacerun: yes">     </span>CODE<span style="mso-spacerun: yes">   
</span>ENDS

<p><span
style='mso-tab-count:6'>                                    </span><span
style="mso-spacerun: yes">     </span>END&#18;

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:2'>            </span>Фиг. 4.16 Арифметический пример
(продолжение)
<p><div align="center"><b><font size="+1"><i>	

<p><div align="center"><a href="index.html"><img src="../soder.gif" width=120 height=31 border=0 alt=""></a></div></p>
</body>
</html>
