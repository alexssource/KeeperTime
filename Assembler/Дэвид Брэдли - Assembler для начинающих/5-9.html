<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body background="../bgrwhite.gif">

<p><div align="center"><b><font size="+1"><i>	
<a name="5-9">Ассемблер и макроассемблер</a></i></font></b></div></p>

<p><span
style="mso-spacerun: yes">    </span>После того, как исходный файл уже создан,
можно применить

<p><span
style="mso-spacerun: yes">    </span>ассемблер.<span style='mso-tab-count:1'>    </span>Существуют
две версии ассемблера:<span style="mso-spacerun: yes">  </span>полная версия,

<p><span
style="mso-spacerun: yes">    </span>называемая Макроассемблером, которая на
специальной, отведенной для

<p><span
style="mso-spacerun: yes">    </span>программы ассемблера дискете, именуется
MASM.EXE, и менее полная

<p><span
style="mso-spacerun: yes">    </span>версия - Ассемблер, или ASM.EXE - без
возможности работать с

<p><span
style="mso-spacerun: yes">    </span>макроопределениями.<span
style="mso-spacerun: yes">  </span>Если для эффективного использования
программы

<p><span
style="mso-spacerun: yes">    </span>MASM требуется объем памяти 96К, то для
программы ASM достаточно

<p><span
style="mso-spacerun: yes">    </span>64К.<span style="mso-spacerun: yes"> 
</span>Указанные значения никак не связаны с объемом памяти,

<p><span
style="mso-spacerun: yes">    </span>занимаемой исходной программой.<span
style="mso-spacerun: yes">  </span>Они относятся к объему памяти,

<p><span
style="mso-spacerun: yes">    </span>необходимой для ассемблирования, а не
выполнения уже

<p><span
style="mso-spacerun: yes">    </span>оттранслированной программы.<span
style="mso-spacerun: yes">  </span>Поэтому возможна ситуация, когда для

<p><span
style="mso-spacerun: yes">    </span>разработки пользовательской программы,
требующей для своего

<p><span
style="mso-spacerun: yes">    </span>выполнения только 4К, необходима ЭВМ с
объемом памяти не менее 64К.

<p><span
style='mso-tab-count:1'>      </span>Входной информацией для ассемблера
является исходный файл,

<p><span
style="mso-spacerun: yes">    </span>созданный редактором EDLIN, либо
аналогичным редактором. Исходный

<p><span
style="mso-spacerun: yes">    </span>файл - это текстовый файл в кодах ASCII. В
результате работы

<p><span
style="mso-spacerun: yes">    </span>ассемблера может получиться до трех
выводных файлов. Объектный файл

<p><span
style="mso-spacerun: yes">    </span>представляет собой вариант исходной
программы, записанной на

<p><span
style="mso-spacerun: yes">  </span><span style="mso-spacerun:
yes">  </span>машинном языке. Объектный файл - это еще не совсем готовая для

<p><span
style="mso-spacerun: yes">    </span>выполнения программа, однако она близка к
реальномй машинному

<p><span
style="mso-spacerun: yes">    </span>языку. Листинговый файл является текстовым
явйлом в кодах ASCII,

<p><span
style="mso-spacerun: yes">    </span>включающим как исходную информацию, так и
информацию, полученную в

<p><span
style="mso-spacerun: yes">    </span>результате работы ассемблера. Приведенные
в данной книге примеры

<p><span
style="mso-spacerun: yes">    </span>являются ассемблерными листинговыми
файлами. И наконец, ассемблер

<p><span
style="mso-spacerun: yes">    </span>может сформировать файл перекрестных
ссылок. Этот файл, не

<p><span
style="mso-spacerun: yes">    </span>являющийся ни программой на машинном
языке, ни текстовым файорм,

<p><span
style="mso-spacerun: yes">    </span>содержит информацию об использовании
символов и меток в

<p><span
style="mso-spacerun: yes">    </span>ассемблерной программе. Как и в случае
объектного файла, перед

<p><span
style="mso-spacerun: yes">    </span>использованием файла перекрестных ссылок
требуется его

<p><span
style="mso-spacerun: yes">    </span>дополнительная обработка.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Запуск ассемблера осуществляется командой
DOS

<p><span
style='mso-tab-count:1'>      </span>A&gt; ASM

<p><span
style='mso-tab-count:1'>      </span>или

<p><span
style='mso-tab-count:1'>      </span>A&gt;MASM

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Команда ASM запускает усеченный вариант
ассемблера, а команда

<p><span
style="mso-spacerun: yes">    </span>MASM - Макроассемблер. После того, как
ассемблер начинает

<p><span
style="mso-spacerun: yes">    </span>выполняться, он просит указать: какие
файлы будут использованы при

<p><span
style="mso-spacerun: yes">    </span>ассемблировании. На Фиг. 5.10 приводится
последовательность команд

<p><span
style="mso-spacerun: yes">    </span>для запуска ассемблера.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>После того, как команда ASM введена, DOS
загружает в память

<p><span
style="mso-spacerun: yes">    </span>ассемблер.<span style='mso-tab-count:1'>    </span>Ассемблер
выводит на экран название версии и переходит

<p><span
style="mso-spacerun: yes">    </span>к выдаче запросов к оператору.<span
style="mso-spacerun: yes">  </span>Если в вашей системе имеется только

<p><span
style="mso-spacerun: yes">    </span>один дисковод с гибким диском, то на этом
этапе вы можете вынуть

<p><span
style="mso-spacerun: yes">    </span>дискету с ассемблером и вставить дискету с
данными.<span style="mso-spacerun: yes">  </span>Ассемблер

<p><span
style="mso-spacerun: yes">    </span>запрашивает:<span style="mso-spacerun:
yes">  </span>какой файл будет транслироваться, при этом достаточно

<p><span
style="mso-spacerun: yes">    </span>ввести только имя этого файла без указания
типа .ASM.<span style="mso-spacerun: yes">  </span>Кроме этого,

<p><span
style="mso-spacerun: yes">    </span>ассемблер запрашивает имена выходных
файлов.<span style="mso-spacerun: yes">  </span>Объектному файлу

<p><span
style="mso-spacerun: yes">    </span>ассемблер присваивает то же имя, что и у
исходного файла, но с

<p><span
style="mso-spacerun: yes">    </span>расширением .OBJ, если только вы не
захотите его изменить.<span style='mso-tab-count:1'>    </span>В

<p><span
style="mso-spacerun: yes">    </span>данном примере ответ оператора
&quot;B:&quot; является указанием ассемблеру,

<p><span
style="mso-spacerun: yes">    </span>чтобы он записал объектный яайл на диск в
дисковод B:.<span style="mso-spacerun: yes">  </span>Аналогичные

<p><span
style="mso-spacerun: yes">    </span>ответы оператора на запросы по поводу
листингового файла и файла

<p><span
style="mso-spacerun: yes">    </span>перекрестных ссылок сообщают ассемблеру,
чтобы эти файлы он также

<p><span
style="mso-spacerun: yes">    </span>записал на диск в дисководе B:.<span
style="mso-spacerun: yes">  </span>В справочнике диска,

<p><span
style="mso-spacerun: yes">    </span>установленного в дисководе B:, можно
увидеть все полученные в

<p><span
style="mso-spacerun: yes">    </span>результате ассемблирования файлы.

<p><span
style='mso-tab-count:1'>      </span>Для всех запросов имеются режимы,
применяемые по умолчанию.

<p><span
style="mso-spacerun: yes">    </span>Если в ответ на любой из этих запросов
нажать клавишу возврата, то

<p><span
style="mso-spacerun: yes">    </span>ассемблер использует режим по умолчанию.
Для листингового файла и

<p><span
style="mso-spacerun: yes">    </span>файла перекрестных ссылок по умолчанию
принимается значение NUL.

<p><span
style="mso-spacerun: yes">    </span>Для DOS файл типа NUL - это специальный
файл: все, что записывается

<p><span
style="mso-spacerun: yes">    </span>в<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">    </span>файл NUL не доступно и не может быть
восстановлено. Файл

<p><span
style="mso-spacerun: yes">    </span>NUL относится к файлам типа WOF
(write=only file - файл только для

<p><span
style='mso-tab-count:1'>      </span>-------------------------------------------------------

<p><span
style='mso-tab-count:1'>      </span>A&gt;ASM

<p><span
style='mso-tab-count:1'>      </span>The IBM Personal Computer Assembler

<p><span
style='mso-tab-count:1'>      </span>Version 1.00 (C)Copyright IBM Corp 1981

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Source filename [.ASM]: B:FIG5_10

<p><span
style='mso-tab-count:1'>      </span>Object filename [FIG5_10.obj] B:

<p><span
style='mso-tab-count:1'>      </span>Source lisying<span style='mso-tab-count:
1'>    </span>[NUL.LST] B:

<p><span
style='mso-tab-count:1'>      </span>Cross reference [NUL.CRF] B:

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Warning Severe

<p><span
style='mso-tab-count:1'>      </span>Errors<span style='mso-tab-count:1'>      </span>Errors

<p><span
style='mso-tab-count:1'>      </span>0<span style='mso-tab-count:1'>     </span>0

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>A&gt;DIR B:FIG5_10.*

<p><span
style='mso-tab-count:1'>      </span>FIG5_10 ASM<span style='mso-tab-count:
1'> </span>44<span style='mso-tab-count:1'>    </span>1-01-83 12:00a

<p><span
style='mso-tab-count:1'>      </span>FIG5_10 LST<span style="mso-spacerun:
yes">    </span>426<span style='mso-tab-count:1'>      </span>1-01-83 12:00a

<p><span
style='mso-tab-count:1'>      </span>FIG5_10 OBJ<span style='mso-tab-count:
1'> </span>40<span style='mso-tab-count:1'>    </span>1-01-83 12:00a

<p><span
style='mso-tab-count:1'>      </span>FIG5_10 CRF<span style='mso-tab-count:
1'> </span>19<span style='mso-tab-count:1'>    </span>1-01-83 12:00a

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>A&gt;

<p><span
style='mso-tab-count:1'>      </span>A&gt;B:

<p><span
style='mso-tab-count:1'>      </span>A&gt;A:ASM FIG5_10,,,,

<p><span
style='mso-tab-count:1'>      </span>The IBM Personal Computer Assembler

<p><span
style='mso-tab-count:1'>      </span>Version 1.00 (C)Copyright IBM Corp 1981

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Warning Severe

<p><span
style='mso-tab-count:1'>      </span>Errors<span style='mso-tab-count:1'>      </span>Errors

<p><span
style='mso-tab-count:1'>      </span>0<span style='mso-tab-count:1'>     </span>0

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>B&gt;

<p><span
style='mso-tab-count:1'>      </span>----------------------------------------------------

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:2'>            </span>Фиг. 5.10 Выполнение ассемблирования

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style="mso-spacerun: yes">    </span>записи).

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Если ассемблер во время ассемблирования
обнаружит какие- нибудь

<p><span
style="mso-spacerun: yes">    </span>ошибки, он записывает их в листинговый
файл. Кроме того, он выводит

<p><span
style="mso-spacerun: yes">    </span>их на дисплей, в результате чего можно
непосредственно исправить

<p><span
style="mso-spacerun: yes">    </span>любые из обнаруженных ощибок и нет
необходимости выискивать их в

<p><span
style="mso-spacerun: yes">    </span>листинговом файле. Если вы пользуетесь
сокращенной версией

<p><span
style="mso-spacerun: yes">    </span>ассемблера, ASM, то информация об ошибках
содержит только их коды.

<p><span
style="mso-spacerun: yes">    </span>В случае Макроассемблера, MSAM, выводится
и код, и информация об

<p><span
style="mso-spacerun: yes">    </span>ошибке. В уменьшенном варианте ассемблера
не остается места для

<p><span
style="mso-spacerun: yes">    </span>текстового сообщения об ошибке. В нижней
части Фиг. 5.10 показан

<p><span
style="mso-spacerun: yes">    </span>более простой способ запуска
Макроассемблера. Этот метод удобен,

<p><span
style="mso-spacerun: yes">    </span>когда в системе имеется два дисковода с
гибкими дисками. В этом

<p><span
style="mso-spacerun: yes">    </span>случае дискета с ассемблером
устанавливается в дисковод A:, а

<p><span
style="mso-spacerun: yes">    </span>дискета с информацией, содержащий исходный
файл, - в дисковод B:.

<p><span
style="mso-spacerun: yes">    </span>Устанавливается режим выбора по умолчанию
дисковода B:. Ассемблер

<p><span
style="mso-spacerun: yes">    </span>запускается с помощью команды A:ASM. В
оставшейся части команды -

<p><span
style="mso-spacerun: yes">    </span>FIG5=10,,,; - содержится вся информация
для ассемблера, которая

<p><span
style="mso-spacerun: yes">    </span>запрашивалась у оператора в предыдущем
примере. FIG5=10 определяет

<p><span
style="mso-spacerun: yes">    </span>имя файла, который нужно ассемблировать, а
последовательность

<p><span
style="mso-spacerun: yes">    </span>запятых служит указанием ассемблеру
сгенерировать объектный,

<p><span
style="mso-spacerun: yes">    </span>листинговый файл и файл перекрестных
ссылок в соответствии со

<p><span
style="mso-spacerun: yes">    </span>стандартным соглашением об именах файлов.
При этом методе

<p><span
style="mso-spacerun: yes">    </span>ассемблирования получаются точно такие же
результаты, что и в

<p><span
style="mso-spacerun: yes">    </span>первом случае.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Существует много способов того, как
указать ассемблеру имена

<p><span
style="mso-spacerun: yes">    </span>файлов. Дап рассмотренных выше примера
соответствуют крайним

<p><span
style="mso-spacerun: yes">    </span>случаям. В первом примере в ответ на
запрос указывалось имя каждого

<p><span
style="mso-spacerun: yes">    </span>из файлов. Во втором случае не было
необходимости ни в каких

<p><span
style="mso-spacerun: yes">    </span>запросах. Более подробно различные
варианты, возможные в команде

<p><span
style="mso-spacerun: yes">    </span>ASM (или MASM), описываются в справочном
руководстве по

<p><span
style="mso-spacerun: yes">    </span>Макроассемблеру.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>После окончания ассемблирования можно
воспользоваться

<p><span
style="mso-spacerun: yes">    </span>полученными выходными файлами. Объектный
файл является исходным для

<p><span
style="mso-spacerun: yes">    </span>следующего этапа формирования выполняемой
программы на машинном

<p><span
style="mso-spacerun: yes">    </span>языке. Это - этап редактирования связей
LINK, который описывается в

<p><span
style="mso-spacerun: yes">    </span>следующем разделе.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>В листинговом файле соединяются исходный
файл и читабельный

<p><span
style="mso-spacerun: yes">    </span>вариант программы на машинном языке. Этот
файл может быть выведен

<p><span
style="mso-spacerun: yes">    </span>на дисплей с помощью команды дисковой
операционной системы TYPE,

<p><span
style="mso-spacerun: yes">    </span>например,

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>A&gt; TYPE B:FIG5=11.LST

<p><![if !supportEmptyParas]>&nbsp;<![endif]>


<p><span style='mso-tab-count:1'>      </span><span
style='mso-fareast-font-family:"MS Mincho"'>Команда TYPE загружает в память
содержимое файла и выводит его

<p><span
style="mso-spacerun: yes">    </span>на дисплей. Одновременно этот же файл
может быть выведен на печать,

<p><span
style="mso-spacerun: yes">    </span>если перед выполнением команды TYPE нажать
клавиши Ctrl=PrtSc.

<p><span
style="mso-spacerun: yes">    </span>Нажатие Ctrl=PrtSc предписывает DOS
осуществлять вывод как на

<p><span
style="mso-spacerun: yes">    </span>экран, так и на принтер. В результате
листинг выводится и на

<p><span
style="mso-spacerun: yes">    </span>дисплей, и на печать. Ширину листинга
следует задать равной 132

<p><span
style="mso-spacerun: yes">    </span>символам. Это выполняется с помощью
команды ассемблера PAGE,

<p><span
style="mso-spacerun: yes">    </span>которая, как вы могли заметить, присутствует
почти во всех

<p><span
style="mso-spacerun: yes">    </span>приводимых примерах программ. Команда

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>PAGE ,132

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>предписывает ассемблеру установить ширину
листингового файла

<p><span
style="mso-spacerun: yes">    </span>равной 132 символам. Кроме того, перед
выводом на принтер нужно

<p><span
style="mso-spacerun: yes">    </span>установить ширину печатаемой колонки. Это
можно выполнить с помощью

<p><span
style="mso-spacerun: yes">    </span>команды MODE дисковой операционной
системы.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>A&gt; MODE LPT1:132.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Данная команда устанавливает режим, при
котором на принтере

<p><span
style="mso-spacerun: yes">    </span>фирмы IBM печатается 132 колонки. В этом
случае листинговый файл

<p><span
style="mso-spacerun: yes">    </span>распечатывается без смещения строк,
которого нельзя избежать на

<p><span
style="mso-spacerun: yes">    </span>дисплее.

<p><div align="center"><a href="index.html"><img src="../soder.gif" width=120 height=31 border=0 alt=""></a></div></p>

</body>
</html>
