<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body background="../bgrwhite.gif">

<p><div align="center"><b><a name="3-14-12">Флаг направления</a></b></div></p>

<p><span
style="mso-spacerun: yes">    </span>Последним флагом в регистре флагов
является флаг направления DF.

<p><span
style="mso-spacerun: yes">    </span>Набор команд микропроцессора 8088 содержит
несколько команд

<p><span
style="mso-spacerun: yes">    </span>обработки строк, которые работают с
большими блоками данных. Эти

<p><span
style="mso-spacerun: yes">    </span>команды обработывают блоки данных побайтно
или по одному слову

<p><span
style="mso-spacerun: yes">    </span>памяти за раз. Индексные регистры
указывают на блоки данных. После

<p><span
style="mso-spacerun: yes">    </span>обработки байта или слова процессор
изменяет индексный регистр так,

<p><span
style="mso-spacerun: yes">    </span>чтобы он указывал на следующий элемент
блока.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Строковые операции используют флаг
направления для определения

<p><span
style="mso-spacerun: yes">    </span>направления продвижения по блоку данных.
Если флаг направления

<p><span
style="mso-spacerun: yes">    </span>сброшен в 0, команды обработки строк
увеличивают значение

<p><span
style="mso-spacerun: yes">    </span>индексного регистра, а если флаг
направления установлен в 1, то они

<p><span
style="mso-spacerun: yes">    </span>уменьшают это значение. Флаг направления
позволяет одному набору

<p><span
style="mso-spacerun: yes">    </span>строковых команд обслуживать оба
направления в зависимости от

<p><span
style="mso-spacerun: yes">    </span>установки флага. В некоторых случаях
желательно пересылать строку с

<p><span
style="mso-spacerun: yes">    </span>увеличением адресов, а в других лучше всего
использовать уменьшение

<p><span
style="mso-spacerun: yes">    </span>адреса.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>В качестве примера предположим, что в
программе используется

<p><span
style="mso-spacerun: yes">    </span>команда пересылки строк для пересылки
блока данных на новое место.

<p><span
style="mso-spacerun: yes">    </span>Если программа пересылает блок, с большего
адреса памяти на

<p><span
style="mso-spacerun: yes">    </span>меньший, она сбрасывает флаг направления,
чтобы увеличивать

<p><span
style="mso-spacerun: yes">    </span>значения индексных регистров после каждой
пересылки; если же

<p><span
style="mso-spacerun: yes">    </span>пересылка производится на больший адрес
памяти, флаг направления

<p><span
style="mso-spacerun: yes">    </span>устанавливается в 1, показывая уменьшение
индексных регистров. В

<p><span
style="mso-spacerun: yes">    </span>случае большинства пересылок не имеет
значения, как именно

<p><span
style="mso-spacerun: yes">    </span>установлен этот флаг. Но если конечное
положение блока перекрывает

<p><span
style="mso-spacerun: yes">    </span>его начальное положение, а флаг
направления уствновлен неверно, то

<p><span
style="mso-spacerun: yes">    </span>информация в блоке будет во время
пересылки испорчена.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Рисунок 3.16 иллюстрирует пример пересылки
блоков. Исходный

<p><span
style="mso-spacerun: yes">    </span>блок данных имеет длину 200H байт и
расположен от 300H до 4FFH.

<p><span
style="mso-spacerun: yes">    </span>Нужно переслать его на новое место,
расположив от 400H до 5FFH;

<p><span
style="mso-spacerun: yes">    </span>исходное и результирующее поля перекрываются.

<p>

<p><span
style='mso-tab-count:3'>                  </span><span style="mso-spacerun:
yes">     </span>300 ГДДДДДДДДДДДЕДДД Указатель<span style="mso-spacerun:
yes">    </span>300 ГДДДДДДДДДДДґ

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">  </span>источника<span style='mso-tab-count:1'> </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">    </span>SI<span style='mso-tab-count:2'>            </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style='mso-tab-count:2'>            </span><span style="mso-spacerun: yes"> 
</span>Источник<span style="mso-spacerun: yes">   </span>400 ГДДДДДДДДДДДЕДДД
Указатель<span style="mso-spacerun: yes">    </span>400 ГДДДДДДДДДДДґ

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">  </span>назначения<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes">    </span>DI<span style='mso-tab-count:2'>            </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style="mso-spacerun: yes">     </span>Назначение <span style='mso-tab-count:
1'>  </span><span style="mso-spacerun: yes">     </span>500 ГДДДДДДДДДДДґ<span
style='mso-tab-count:2'>        </span><span style="mso-spacerun: yes">      
</span>500 ГДДДДДДДДДДДґ&lt;-- Указатель

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і<span style="mso-spacerun: yes">   
</span>источника

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">  </span><span style="mso-spacerun:
yes">     </span>і

<p><span
style='mso-tab-count:4'>                        </span><span
style="mso-spacerun: yes"> </span>і<span style='mso-tab-count:1'>    </span><span
style="mso-spacerun: yes">     </span>і<span style='mso-tab-count:3'>                  </span><span
style="mso-spacerun: yes">   </span>і<span style='mso-tab-count:1'>  </span><span
style="mso-spacerun: yes">       </span>і

<p><span
style='mso-tab-count:3'>                  </span><span style="mso-spacerun:
yes">     </span>600 ГДДДДДДДДДДДґ<span style='mso-tab-count:2'>        </span><span
style="mso-spacerun: yes">       </span>600 ГДДДДДДДДДДДґ&lt;-- Указатель

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:2'>            </span>Фиг. 3.16 Флаг направления&#18;

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>В примере на Фиг.3.16(а) указатели
источника и результата

<p><span
style="mso-spacerun: yes">    </span>установлены на начала соответствующих
блоков: указатель источника

<p><span
style="mso-spacerun: yes">    </span>на 300H, а указатель результата на 400H.
Флаг направления в примере


<p><span
style="mso-spacerun: yes">    </span>сброшен, так, чтобы указатели
увеличивались после каждой пересылки.

<p><span
style="mso-spacerun: yes">    </span>Как показано на рисунке, после пересылки с
помощью строковой

<p><span
style="mso-spacerun: yes">    </span>операции 100H байт, указатель источника
переместится на блок

<p><span
style="mso-spacerun: yes">    </span>результата, а эта область блока уже
заполнена данными после

<p><span
style="mso-spacerun: yes">    </span>пересылки. Пересылка последних 100H байт
будет неправильной, так

<p><span
style="mso-spacerun: yes">    </span>как потеряны исходные данные блока.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>В части (b) примера указатели и источника,
и результата

<p><span
style="mso-spacerun: yes">    </span>установлены на концы блоков. Флаг
направления установлен так, что

<p><span
style="mso-spacerun: yes">    </span>содержимое указателей уменьшается после
пересылки. При таком

<p><span
style="mso-spacerun: yes">    </span>способе данные пересылаются верно.

<p><![if !supportEmptyParas]>&nbsp;<![endif]>

<p><span
style='mso-tab-count:1'>      </span>Программы ввода-вывода для IBM PC дают
характерный пример

<p><span
style="mso-spacerun: yes">    </span>использования флага направления для
перемещения изображения на

<p><span
style="mso-spacerun: yes">    </span>экране дисплея. Программа ввода-вывода
использует команды пересылки

<p><span
style="mso-spacerun: yes">    </span>строк микропроцессора 8088 для пересылки
данных внутри буфера

<p><span
style="mso-spacerun: yes">    </span>дисплея. Когда программа передвигает
изображение на экране вверх,

<p><span
style="mso-spacerun: yes">    </span>команды пересылают данные в меньшие адреса
памяти. Когда программа

<p><span
style="mso-spacerun: yes">    </span>опускает символы на экране вниз, команды
пересылают данные в

<p><span
style="mso-spacerun: yes">    </span>большие адреса памяти. В каждом случае
программа устанавливает или

<p><span
style="mso-spacerun: yes">    </span>сбрасывает флаг направления в соответствии
с направлением

<p><span
style="mso-spacerun: yes">    </span>пересылаемых данных.

<p><div align="center"><a href="index.html"><img src="../soder.gif" width=120 height=31 border=0 alt=""></a></div></p>
</body>
</html>
